<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <h:head>
        <title>Facelet Title</title>

        <style>

            tr.ui-widget-content {
                border-width: none;
            }
        </style>  
    </h:head>

    <ui:composition template="./template.xhtml">

        <ui:define name="top">

        </ui:define>    

        <ui:define name="body">      
            <br/>
            <hr></hr>
            <h:form id="formId">
                <br/>
                <p:growl id="growl" showDetail="true" sticky="true" />
                <table class="table table-hover">

                    <tr>                     
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Nazwa pojazdu
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_nazwa_pojazdu" 
                                           editor="true" 
                                           label="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.id_samochodu}" >
                                    <p:ajax event="save"  
                                            update ="brak_nazwy_pojazdu"/>
                                    <h:selectOneMenu value="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.id_samochodu}"
                                                     id="nazwa_pojazdu" 
                                                     required="true"
                                                     requiredMessage="Nie wskazano nazwy pojazdu.">
                                        <f:selectItems value="#{samochodZapytania.samochodList}" var="lok"
                                                       itemLabel="#{lok.nazwa}" itemValue="#{lok.nazwa}"/>
                                    </h:selectOneMenu>> 
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <h:message id="brak_nazwy_pojazdu" 
                                       for="nazwa_pojazdu"></h:message>                 
                        </td>

                    </tr>

                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Data rozpoczecia ubezpieczenia
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_data_rozpoczecia" 
                                           editor="true" 
                                           label="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.data_rozpoczecia}" >
                                    <p:ajax event="save"  
                                            update ="brak_daty_rozpoczecia"/>
                                    <p:inputText value="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.data_rozpoczecia}"
                                                 id="data_rozpoczecia" 
                                                 required="true"
                                                 requiredMessage="Nie podano daty rozpoczecia ubezpieczenia."
                                                 pt:placeholder="rrrr-mm-dd" 
                                                 validatorMessage="Podano błędną datę rozpoczecia ubezpieczenia.">
                                        <f:validateRegex pattern="[0-9].{3}[-][0-9].{1}[-][0-9].{1}" for="data_rozpoczecia"/>
                                    </p:inputText> 
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_daty_rozpoczecia" 
                                            for="data_rozpoczecia"></h:message>
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Data zakończenia ubezpieczenia
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_data_zakonczenia" 
                                           editor="true" 
                                           label="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.data_zakonczenia}" >
                                    <p:ajax event="save"  
                                            update ="brak_daty_zakonczenia"/>
                                    <p:inputText value="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.data_zakonczenia}"
                                                 id="data_zakonczenia" 
                                                 required="true"
                                                 requiredMessage="Nie podano daty zakonczenia ubezpieczenia."
                                                 pt:placeholder="rrrr-mm-dd" 
                                                 validatorMessage="Podano błędną datę zakonczenia ubezpieczenia.">
                                        <f:validateRegex pattern="[0-9].{3}[-][0-9].{1}[-][0-9].{1}" for="data_zakonczenia"/>
                                    </p:inputText> 
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_daty_zakonczenia" 
                                            for="data_zakonczenia"></h:message>
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Data podpisania umowy ubezpieczenia (pierwszej).
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_data_zawarcia" 
                                           editor="true" 
                                           label="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.data_zawarcia}" >
                                    <p:ajax event="save"  
                                            update ="brak_daty_zawarcia"/>
                                    <p:inputText value="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.data_zawarcia}"
                                                 id="data_zawarcia" 
                                                 required="true"
                                                 requiredMessage="Nie podano daty zawarcia ubezpieczenia."
                                                 pt:placeholder="rrrr-mm-dd" 
                                                 validatorMessage="Podano błędną datę zawarcia ubezpieczenia.">
                                        <f:validateRegex pattern="[0-9].{3}[-][0-9].{1}[-][0-9].{1}" for="data_zawarcia"/>
                                    </p:inputText> 
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_daty_zawarcia" 
                                            for="data_zawarcia"></h:message>
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">Nazwa ubezpieczyciela</p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_nazwa_ubezpieczyciela" 
                                           editor="true" 
                                           label="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.ubezpieczyciel}">
                                    <p:ajax event="save"  
                                            update ="brak_nazwa_ubezpieczyciela"/>
                                    <p:inputText value="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.ubezpieczyciel}"
                                                 id="nazwa_ubezpieczyciela" 
                                                 required="true"
                                                 requiredMessage="Nie podano nazwy ubezpieczyciela.">
                                    </p:inputText> 
                                </p:inplace>
                            </p>    
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_nazwa_ubezpieczyciela" 
                                            for="nazwa_ubezpieczyciela"></h:message>
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">Wysokosc ubezpieczenia</p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_wysokosc_ubezpieczenia" 
                                           editor="true" 
                                           label="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.skladka}">
                                    <p:ajax event="save"  
                                            update ="brak_wysokosci_ubezpieczenia"/>
                                    <p:inputText value="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.skladka}"
                                                 id="wysokosc_ubezpieczenia" 
                                                 required="true"
                                                 requiredMessage="Nie podano wysokosci ubezpieczenia."
                                                 validatorMessage="Podano błędną wysokosc ubezpieczenia.">
                                        <f:validateRegex pattern="[0-9]+[,][0-9][0-9]" for="wysokosc_ubezpieczenia"/>
                                    </p:inputText> 
                                </p:inplace>
                            </p>    
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_wysokosci_ubezpieczenia" 
                                            for="wysokosc_ubezpieczenia"></h:message>
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">Pracownik Zawierajacy Umowe</p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_pracownik" 
                                           editor="true" 
                                           label="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.id_operator_zawierajacy}">
                                    <p:ajax event="save"  
                                            update ="brak_pracownik"/>
                                    <h:selectOneMenu value="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.id_operator_zawierajacy}"
                                                     id="pracownik" 
                                                     required="true"
                                                     requiredMessage="Nie wybrano pracownika."
                                                     >
                                        <f:selectItems value="#{pracownikZapytania.listaPracownik}" var="lok"
                                                       itemLabel="#{lok.imieNazwisko}" itemValue="#{lok.imieNazwisko}"/>

                                    </h:selectOneMenu> 
                                </p:inplace>
                            </p>    
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_pracownik" 
                                            for="pracownik"></h:message>
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Nazwa Sprzedawcy.
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_nazwa_sprzedawcy" 
                                           editor="true" 
                                           label="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.nazwa_sprzedawcy}" >
                                    <p:ajax event="save"  
                                            update ="brak_daty_zawarcia"/>
                                    <p:inputText value="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.nazwa_sprzedawcy}"
                                                 id="nazwa_sprzedawcy" 
                                                 required="true"
                                                 requiredMessage="Nie podano nazwy sprzedawcy."
                                                 >

                                    </p:inputText> 
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_nazwa_sprzedawcy" 
                                            for="nazwa_sprzedawcy"></h:message>
                            </p>
                        </td>
                    </tr>
                     <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Kontakt.
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_kontakt" 
                                           editor="true" 
                                           label="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.kontakt}" >
                                    <p:ajax event="save"  
                                            update ="brak_kontakt"/>
                                    <p:inputText value="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.kontakt}"
                                                 id="kontakt" 
                                                 required="true"
                                                 requiredMessage="Nie podano kontaktu."
                                                 >

                                    </p:inputText> 
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_kontakt" 
                                            for="kontakt"></h:message>
                            </p>
                        </td>
                    </tr>
                     <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Notatka.
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_notatka" 
                                           editor="true" 
                                           label="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.notatka}" >
                                    <p:ajax event="save"  
                                            />
                                    <p:inputTextarea value="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.notatka}"
                                                 id="notatka" 
                                                 
                                                 />

                                    
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Numer Ubezpieczenia.
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_nr_ubezpieczenia" 
                                           editor="true" 
                                           label="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.numer_polisy}" >
                                    <p:ajax event="save"  
                                            update ="brak_nr_ubezpieczenia"/>
                                    <p:inputText value="#{ubezpieczeniaWyswietl.wyedytowaneUbezpieczenie.numer_polisy}"
                                                 id="nr_ubezpieczenia" 
                                                 required="true"
                                                 requiredMessage="Nie podano numeru ubezpieczenia."
                                                 >

                                    </p:inputText> 
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_nr_ubezpieczenia" 
                                            for="nr_ubezpieczenia"></h:message>
                            </p>
                        </td>
                    </tr> 
                </table>
                <hr></hr>
                <br/>
                <br/>
            </h:form>
            <h:form>
                <h:commandButton  value="Zatwierdz edycje" action="#{ubezpieczeniaWyswietl.weryfikacjaDanych}" ></h:commandButton>
            </h:form>
            <p:dialog header="Potwierdzenie edycji" widgetVar="dlg1" minHeight="40"  width="500" modal="true">
                <h:form id="confirmSaveDialog">

                    <br/>

                    <p:dataTable var="roznice" value="#{ubezpieczeniaWyswietl.listaRoznicUbezpieczenie}" >
                        <p:column headerText="Nazwa pola">
                            <h:outputText value="#{roznice.nazwaPola}"/>
                        </p:column>
                        <p:column headerText="Wartość oryginalna">
                            <h:outputText value="#{roznice.wartoscWzor}"/>
                        </p:column>
                        <p:column headerText="Wartość wyedytowana">
                            <h:outputText value="#{roznice.wartoscKopia}"/>
                        </p:column>
                    </p:dataTable>

                    <br/>

                    <h:commandButton action="#{ubezpieczeniaWyswietl.zapiszWyedytowaneUbezpieczenie}" value="Potwierdz edycje"/>


                </h:form>
            </p:dialog>
            
        </ui:define>
        <ui:define name="bottom">
            <h:form>
                <Button type="button" class="btn btn-default btn-sm">
                    <p:commandButton action="#{wyswietlSamochod.pokazWszystkieSamochody()}" value="Powrot" class="btn-default btn-sm">
                        <span class="glyphicon glyphicon-backward"></span></p:commandButton> 
                </Button>
            </h:form>
        </ui:define>  

    </ui:composition>    
</html>