<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <h:head>
        <title>Facelet Title</title>

        <style>

            tr.ui-widget-content {
                border-width: none;
            }
        </style>  
    </h:head>

    <ui:composition template="./template.xhtml">

        <ui:define name="top">

        </ui:define>    

        <ui:define name="body">      
            <br/>
            <hr></hr>
            <h:form id="formId">
                <br/>
                <p:growl id="growl" showDetail="true" sticky="true" />
                <table class="table table-hover">

                    <tr>                     
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Login pracownika
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_login" 
                                           editor="true" 
                                           label="#{pracownikWyswietl.wyedytowanePracownik.login}" >
                                    <p:ajax event="save"  
                                            update ="brak_loginu"/>

                                    <p:inputText value="#{pracownikWyswietl.wyedytowanePracownik.login}"
                                                 id="login" 
                                                 required="true"
                                                 requiredMessage="Nie podano loginu.">     
                                    </p:inputText> 
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <h:message id="brak_loginu" 
                                       for="login"></h:message>                 
                        </td>

                    </tr>

                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Imie pracownika
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_imie" 
                                           editor="true" 
                                           label="#{pracownikWyswietl.wyedytowanePracownik.imie}" >
                                    <p:ajax event="save"  
                                            update ="brak_imie"/>
                                    <p:inputText value="#{pracownikWyswietl.wyedytowanePracownik.imie}"
                                                 id="imie" 
                                                 required="true"
                                                 requiredMessage="Nie podano imienia."> 
                                    </p:inputText> 
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_imie" 
                                            for="imie"></h:message>
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Nazwisko pracownika
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_nazwisko" 
                                           editor="true" 
                                           label="#{pracownikWyswietl.wyedytowanePracownik.nazwisko}" >
                                    <p:ajax event="save"  
                                            update ="brak_nazwisko"/>
                                    <p:inputText value="#{pracownikWyswietl.wyedytowanePracownik.nazwisko}"
                                                 id="nazwisko" 
                                                 required="true"
                                                 requiredMessage="Nie podano nazwiska."> 
                                    </p:inputText> 
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_nazwisko" 
                                            for="nazwisko"></h:message>
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Telefon stacjonarny
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_tel_stac" 
                                           editor="true" 
                                           label="#{pracownikWyswietl.wyedytowanePracownik.tel_stac}" >
                                    <p:ajax event="save"  
                                            update ="brak_tel_stac"/>
                                    <p:inputText value="#{pracownikWyswietl.wyedytowanePracownik.tel_stac}"
                                                 id="tel_stac" 
                                                 required="false"
                                                 
                                                 validatorMessage="Podano błędny numer telefonu."> 
                                        <f:validateRegex pattern="[0-9].{8}" for="tel_stac"/>
                                    </p:inputText> 
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_tel_stac" 
                                            for="tel_stac"></h:message>
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Telefon komorkowy
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_tel_kom" 
                                           editor="true" 
                                           label="#{pracownikWyswietl.wyedytowanePracownik.tel_kom}" >
                                    <p:ajax event="save"  
                                            update ="brak_tel_kom"/>
                                    <p:inputText value="#{pracownikWyswietl.wyedytowanePracownik.tel_kom}"
                                                 id="tel_kom" 
                                                 required="false"
                                                 
                                                 validatorMessage="Podano błędny numer telefonu."> 
                                        <f:validateRegex pattern="[0-9].{8}" for="tel_kom"/>
                                    </p:inputText> 
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_tel_kom" 
                                            for="tel_kom"></h:message>
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                Mail
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_mail" 
                                           editor="true" 
                                           label="#{pracownikWyswietl.wyedytowanePracownik.mail}" >
                                    <p:ajax event="save"  
                                            update ="brak_mail"/>
                                    <p:inputText value="#{pracownikWyswietl.wyedytowanePracownik.mail}"
                                                 id="mail" 
                                                 required="false"
                                                 requiredMessage="Nie podano adresu mailoweg."
                                                 validatorMessage="Podano błędny adres mailowy."> 
                                        <f:validateRegex pattern="([^.@]+)(\.[^.@]+)*@([^.@]+\.)+([^.@]+)" />
                                    </p:inputText> 
                                </p:inplace>
                            </p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_mail" 
                                            for="mail"></h:message>
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">Lokalizacja.</p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_lokalizacja" 
                                           editor="true" 
                                           label="#{pracownikWyswietl.wyedytowanePracownik.id_lokalizacja}">
                                    <p:ajax event="save"  
                                            update ="brak_lokalizacja"/>
                                    <h:selectOneMenu value="#{pracownikWyswietl.wyedytowanePracownik.id_lokalizacja}"
                                                     id="lokalizacja" 
                                                     required="true"
                                                     requiredMessage="Nie wybrano lokalizacji.">
                                        <f:selectItems value="#{lokalizacjaZapytania.lokalizacjaList}" var="item"
                                                       itemLabel="#{item.nazwa_lokalizacja}" itemValue="#{item.nazwa_lokalizacja}"/>
                                    </h:selectOneMenu> 
                                </p:inplace>
                            </p>    
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_lokalizacja" 
                                            for="lokalizacja"></h:message>
                            </p>
                        </td>
                    </tr>
                     <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">Dzial.</p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_dzial" 
                                           editor="true" 
                                           label="#{pracownikWyswietl.wyedytowanePracownik.id_dzial}">
                                    <p:ajax event="save"  
                                            update ="brak_dzial"/>
                                    <h:selectOneMenu value="#{pracownikWyswietl.wyedytowanePracownik.id_dzial}"
                                                     id="dzial" 
                                                     required="true"
                                                     requiredMessage="Nie wybrano dzialu.">
                                        <f:selectItems value="#{dzialZapytania.dzialList}" var="item"
                                                       itemLabel="#{item.nazwa_dzial}" itemValue="#{item.nazwa_dzial}"/>
                                    </h:selectOneMenu> 
                                </p:inplace>
                            </p>    
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_dzial" 
                                            for="dzial"></h:message>
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">Stanowisko.</p>
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle">
                            <p class="text-center">
                                <p:inplace id="inplace_stanowisko" 
                                           editor="true" 
                                           label="#{pracownikWyswietl.wyedytowanePracownik.id_stanowisko}">
                                    <p:ajax event="save"  
                                            update ="brak_stanowisko"/>
                                    <h:selectOneMenu value="#{pracownikWyswietl.wyedytowanePracownik.id_stanowisko}"
                                                     id="stanowisko" 
                                                     required="true"
                                                     requiredMessage="Nie wybrano stanowiska.">
                                        <f:selectItems value="#{stanowiskoZapytania.stanowiskoList}" var="item"
                                                       itemLabel="#{item.nazwa_stanowisko}" itemValue="#{item.nazwa_stanowisko}"/>
                                    </h:selectOneMenu> 
                                </p:inplace>
                            </p>    
                        </td>
                        <td class="col-md-4" 
                            style="vertical-align: middle"> 
                            <p class="text-center">
                                <h:message  id="brak_stanowisko" 
                                            for="stanowisko"></h:message>
                            </p>
                        </td>
                    </tr>
                </table>
                <hr></hr>
                <br/>
                <br/>
            </h:form>
            <h:form>
                <h:commandButton  value="Zatwierdz edycje" action="#{pracownikWyswietl.weryfikacjaDanych()}" ></h:commandButton>
            </h:form>
            <p:dialog header="Potwierdzenie edycji" widgetVar="dlg1" minHeight="40"  width="500" modal="true">
                <h:form id="confirmSaveDialog">

                    <br/>

                    <p:dataTable var="roznice" value="#{pracownikWyswietl.listaRoznicPracownik}" >
                        <p:column headerText="Nazwa pola">
                            <h:outputText value="#{roznice.nazwaPola}"/>
                        </p:column>
                        <p:column headerText="Wartość oryginalna">
                            <h:outputText value="#{roznice.wartoscWzor}"/>
                        </p:column>
                        <p:column headerText="Wartość wyedytowana">
                            <h:outputText value="#{roznice.wartoscKopia}"/>
                        </p:column>
                    </p:dataTable>

                    <br/>

                    <h:commandButton action="#{pracownikWyswietl.zapiszWyedytowanegoPracownika()}" value="Potwierdz edycje"/>


                </h:form>
            </p:dialog>

        </ui:define>
        <ui:define name="bottom">
            <h:form>
                <Button type="button" class="btn btn-default btn-sm">
                    <p:commandButton action="#{pracownikWyswietl.goToIndex()}" value="Powrot" class="btn-default btn-sm">
                        <span class="glyphicon glyphicon-backward"></span></p:commandButton> 
                </Button>
            </h:form>
        </ui:define>  

    </ui:composition>    
</html>